# MoniKit OpenTelemetry ì„¤ì • ì˜ˆì‹œ
# ì´ íŒŒì¼ì„ application.ymlì— ë³µì‚¬í•˜ê±°ë‚˜ ë³„ë„ í”„ë¡œíŒŒì¼ë¡œ ì‚¬ìš©í•˜ì„¸ìš”.

monikit:
  # ğŸ”¥ OpenTelemetry í™œì„±í™” (í•µì‹¬!)
  otel:
    enabled: true
    
    # OTLP ì—”ë“œí¬ì¸íŠ¸ ì„¤ì • (ADOT Collector ì£¼ì†Œ)
    traces:
      endpoint: "http://localhost:4317"  # gRPC
      # endpoint: "http://localhost:4318/v1/traces"  # HTTP
    logs:
      endpoint: "http://localhost:4317"
    metrics:
      endpoint: "http://localhost:4317"
      
    # ğŸ¯ Sampling ì„¤ì • (ì¤‘ìš”!)
    sampling:
      ratio: 0.1  # 10% ìƒ˜í”Œë§ (ìš´ì˜ í™˜ê²½ ê¶Œì¥)
      # ratio: 1.0  # 100% ìƒ˜í”Œë§ (ê°œë°œ í™˜ê²½)
      
  # ê¸°ì¡´ ì„¤ì •ì€ ê·¸ëŒ€ë¡œ ìœ ì§€ (í˜¸í™˜ì„±)
  logging:
    log-enabled: true  # ë³‘ë ¬ ì‹¤í–‰ ì‹œì—ë§Œ true
    dynamic-matching:
      - classNamePattern: ".*Service"
        methodNamePattern: ".*"
        when: "#executionTime > 100"
        thresholdMillis: 100
        tag: "slow-service"
      - classNamePattern: ".*Controller"
        methodNamePattern: ".*"
        when: "#executionTime > 200"
        thresholdMillis: 200
        tag: "slow-controller"

# Spring Boot ì„¤ì •
spring:
  application:
    name: "monikit-demo-app"  # ğŸ”¥ ì„œë¹„ìŠ¤ ì´ë¦„ (ì¤‘ìš”!)

# ë¡œê¹… ì„¤ì • (OpenTelemetry ë¡œê·¸ì™€ ì—°ë™)
logging:
  level:
    com.monikit: INFO
    io.opentelemetry: DEBUG  # OpenTelemetry ë””ë²„ê¹…ìš©
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [%X{traceId},%X{spanId}] %logger{36} - %msg%n"
